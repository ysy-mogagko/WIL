# 20251220
# 개요
## 소개
- linux 환경에서 자원을 관리하는 단위
- `/sys/fs/cgroup/<cgroup name>` 에 필요한 설정 파일을 생성
## 설정
### 항목
- CPU
	사용 시간 할당(사용률)
- cpuset
	해당 cgroup이 어느 core에서 동작하게 할 지 설정
	testset와 비슷한 기능을 제공
	NUMA 머신에서도 동작하기 위해서 메모리 노드 목록 설정
- Memory
	사용량을 제한
	해당 사용량 초과 시 OOM 발생
- freezer
	container 환경에서의 `pause` 및 `unpause`와 같은 역활
- blkio
	BlockIO에 대한 제한 설정
- PIDs
	생성되는 child의 수를 제한
- net_cls
	network packet에 classid를 추가하여 TC에서 식별 가능하도록 함
- ns
	namespace 설정
- devices
	장비에 대한 접근 제어
### 적용
모든 적용은 cgroup의 존재하는 프로세스에게 적용
CPU 및 Memory를 제한 하는 경우 각 프로세스에 각각 적용되는게 아닌 각 프로세스들의 합으로 적용
## 버전
### 정보
#### v1
- Multiple hierarchies
- controller 별로 관리 됨
```
/sys/fs/cgroup/cpu
	/sys/fs/cgroup/cpu/demo
		/sys/fs/cgroup/cpu/demo/tasks
		/sys/fs/cgroup/cpu/demo/cpu.cfs_quota_us
		/sys/fs/cgroup/cpu/demo/cpu.cfs_period_us
/sys/fs/cgroup/memory
	/sys/fs/cgroup/memory/demo
		/sys/fs/cgroup/memory/demo/tasks
		/sys/fs/cgroup/memory/demo/memory.limit_in_bytes
		/sys/fs/cgroup/memory/demo/memory.usage_in_bytes
```
#### v2
- Unified hierarchies
- cgroup 별로 관리 됨
```
/sys/fs/cgroup/demo
	/sys/fs/cgroup/demo/cpu.max
	/sys/fs/cgroup/demo/memory.max
```
### 확인 방법
#### stat
`stat -fc %T /sys/fs/cgroup`
cgroup2fs인 경우 v2, tmpfs인 경우 v1이거나 하이브리드
#### mount
`mount | grep cgroup`
#### cat
`cat /proc/self/cgroup`
단일로 표시되는 경우 v2, 여러 계층으로 표시되는 경우 v1
